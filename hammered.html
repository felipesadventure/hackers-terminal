<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zalpha Math</title>
  <link href="cryptic2.css" rel="stylesheet" type="text/css">
  <script>
    let problems = [];
    let correctAnswers = [];

    function generateProblem() {
      const operations = ["*", "+", "-"]; // easier operations
      const op = operations[Math.floor(Math.random() * operations.length)];

      let a = Math.floor(Math.random() * 20) + 5;
      let b = Math.floor(Math.random() * 20) + 1;

      let expression = `${a} ${op} ${b}`;
      let result = eval(expression);

      return { question: expression, answer: result };
    }

    function setup() {
      problems = [];
      correctAnswers = [];
      const container = document.getElementById("problems");
      container.innerHTML = "";

      for (let i = 0; i < 20; i++) {
        const prob = generateProblem();
        problems.push(prob.question);
        correctAnswers.push(prob.answer);

        container.innerHTML += `
          <label>${prob.question} = 
            <input type="text" id="answer${i}" size="2">
          </label><br>
        `;
      }

      startCountdown(90); // 120 seconds
    }

    function checkAnswers() {
      for (let i = 0; i < correctAnswers.length; i++) {
        const userAnswer = document.getElementById(`answer${i}`).value.trim();
        if (parseFloat(userAnswer) !== correctAnswers[i]) {
          alert("One or more answers are incorrect. Try again!");
          return;
        }
      }
      alert("Access Granted!");
      window.location.href = "https://youtu.be/DHNg3dlX480"; // replace with your destination
    }

    function startCountdown(seconds) {
      const timerDisplay = document.getElementById("countdown");
      let timeLeft = seconds;

      const interval = setInterval(() => {
        const minutes = Math.floor(timeLeft / 60);
        const secs = timeLeft % 60;
        timerDisplay.textContent = `This page will refresh in: ${minutes}:${secs < 10 ? '0' : ''}${secs}`;

        if (timeLeft <= 0) {
          clearInterval(interval);
          location.reload(); // refresh page
        }

        timeLeft--;
      }, 1000);
    }

    window.onload = setup;
  </script>
  <css></css>
</head>
<body>
  <h2>Answer All Problems to Gain Access</h2>
  <div id="problems"></div>
  <button onclick="checkAnswers()">Submit Answers</button>
  <p id="countdown" style="font-weight: bold; margin-top: 20px;">This page will refresh in: 1:30</p>
</body>
</html>
